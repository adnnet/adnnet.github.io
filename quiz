<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­”é¢˜å°ç¨‹åº</title>
    <!-- ï¼ˆä½ çš„ CSS æ ·å¼ä¿æŒä¸å˜ï¼‰ -->
    <style>
        /* ... ä½ çš„åŸæœ‰ style å†…å®¹ä¸å˜ ... */
        .admin-link {
            margin-top: 15px;
            font-size: 12px;
            color: #ccc;
            cursor: pointer;
            text-decoration: underline;
        }
        .admin-link:hover {
            color: #FFD700;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- å¼€å§‹é¡µé¢ï¼ˆç°åœ¨é»˜è®¤ä¸æ˜¾ç¤ºï¼‰ -->
        <div id="start-screen" class="screen">
            <h1>ç­”é¢˜å°ç¨‹åº</h1>
            <button class="btn" onclick="startQuiz()">å¼€å§‹ç­”é¢˜</button>
            <!-- ç®¡ç†æŒ‰é’®å·²ç§»é™¤ -->
        </div>
        
        <!-- äºŒç»´ç æ‰«ç é¡µé¢ï¼ˆç°åœ¨ä½œä¸ºé»˜è®¤é¦–é¡µï¼‰ -->
        <div id="qrcode-screen" class="screen active">
            <h1>æ¬¢è¿å‚åŠ äº‘å†…æ§åˆè§„æ—¥ç­”é¢˜æ´»åŠ¨</h1>
            <div class="qr-code">
                <div class="qr-placeholder">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" alt="äºŒç»´ç " width="200" height="200" id="qr-code-img">
                </div>
                <p>è¯·æ‰«æäºŒç»´ç å¼€å§‹ç­”é¢˜</p>
                <p id="deploy-note" style="font-size: 12px; color: #FFD700; margin-top: 10px; display: none;">
                    æç¤ºï¼šè¯·å°†æ­¤é¡µé¢éƒ¨ç½²åˆ°WebæœåŠ¡å™¨ä»¥ç”Ÿæˆæœ‰æ•ˆäºŒç»´ç 
                </p>
            </div>
            <button class="btn" onclick="proceedToQuiz()">å¼€å§‹ç­”é¢˜</button>
            <!-- ç®¡ç†å‘˜å…¥å£ï¼ˆå°å­—ï¼‰ -->
            <div class="admin-link" onclick="requestAdminAccess()">ç®¡ç†å‘˜å…¥å£</div>
        </div>
        
        <!-- å…¶ä»–é¡µé¢ï¼ˆquiz-screen, survey-screen, result-screenï¼‰ä¿æŒä¸å˜ -->

        <!-- ç®¡ç†é¡µé¢ï¼ˆä¿æŒä¸å˜ï¼‰ -->
        <div id="admin-screen" class="screen">
            <h2>é¢˜ç›®ç®¡ç†</h2>
            <!-- ... åŸæœ‰ç®¡ç†è¡¨å•å†…å®¹ ... -->
            <button class="btn" onclick="showStartScreen()">è¿”å›é¦–é¡µ</button>
        </div>
    </div>

    <script>
        // === æ–°å¢ï¼šç®¡ç†å‘˜å¯†ç  ===
        const ADMIN_PASSWORD = "adn1717"; // ğŸ‘ˆ ä½ å¯ä»¥æ”¹æˆè‡ªå·±çš„å¯†ç 

        // é¡µé¢åŠ è½½æ—¶ä¸å†æ˜¾ç¤º start-screenï¼Œè€Œæ˜¯ç›´æ¥æ˜¾ç¤º qrcode-screenï¼ˆå·²åœ¨ HTML ä¸­è®¾ç½® activeï¼‰
        window.onload = function() {
            loadQuestions();
            updateQuestionsList();
            generateQRCode();
        };

        // è¦†ç›–åŸæ¥çš„ startQuizï¼Œå…¶å®ç°åœ¨ä¸éœ€è¦äº†ï¼Œä½†ä¿ç•™ä»¥é˜²ä¸‡ä¸€
        function startQuiz() {
            showScreen('qrcode-screen');
        }

        // æ˜¾ç¤ºæŒ‡å®šå±å¹•
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // è¯·æ±‚ç®¡ç†å‘˜æƒé™
        function requestAdminAccess() {
            const input = prompt("è¯·è¾“å…¥ç®¡ç†å¯†ç ï¼š");
            if (input === ADMIN_PASSWORD) {
                showScreen('admin-screen');
                updateAnswerInputs();
                updateQuestionsList();
            } else if (input !== null) {
                alert("å¯†ç é”™è¯¯ï¼");
            }
        }

        // è¿”å›é¦–é¡µï¼ˆæŒ‡å‘äºŒç»´ç é¡µï¼Œè€ŒéåŸ start-screenï¼‰
        function showStartScreen() {
            showScreen('qrcode-screen');
        }

        // ========== ä»¥ä¸‹æ˜¯ä½ åŸæœ‰çš„ JS é€»è¾‘ï¼ˆä¿æŒä¸å˜ï¼‰==========
        let questionBank = [];
        let gameState = {
            currentQuestionIndex: 0,
            selectedQuestions: [],
            userAnswers: [],
            score: 0
        };

        function generateQRCode() {
            let currentURL = window.location.href;
            if (currentURL.startsWith('file://')) {
                currentURL = 'http://your-domain.com/quiz.html';
                document.getElementById('deploy-note').style.display = 'block';
            }
            const qrCodeImg = document.getElementById('qr-code-img');
            if (qrCodeImg) {
                qrCodeImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(currentURL)}`;
            }
        }

        function loadQuestions() {
            const savedQuestions = localStorage.getItem('quizQuestions');
            if (savedQuestions) {
                questionBank = JSON.parse(savedQuestions);
            }
        }

        function saveQuestions() {
            localStorage.setItem('quizQuestions', JSON.stringify(questionBank));
        }

        function proceedToQuiz() {
            loadQuestions();
            if (questionBank.length === 0) {
                alert("é¢˜åº“ä¸ºç©ºï¼Œè¯·å…ˆæ·»åŠ é¢˜ç›®ï¼");
                requestAdminAccess(); // æ”¹ä¸ºè°ƒç”¨å¯†ç å…¥å£
                return;
            }
            gameState.selectedQuestions = getRandomQuestions(questionBank, Math.min(3, questionBank.length));
            gameState.userAnswers = new Array(gameState.selectedQuestions.length).fill(null);
            gameState.currentQuestionIndex = 0;
            gameState.score = 0;
            showScreen('quiz-screen');
            loadQuestion();
        }

        // ...ï¼ˆä½ åŸæœ‰çš„å…¶ä»–å‡½æ•°ï¼šgetRandomQuestions, loadQuestion, selectOption, nextQuestion, checkAnswers, submitSurvey, restartQuiz, updateAnswerInputs, addOption, removeOption, saveQuestion, updateQuestionsListï¼‰...

        // æ³¨æ„ï¼šæŠŠåŸæ¥çš„ showAdminPanel å‡½æ•°åˆ é™¤æˆ–ä¸ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨ requestAdminAccess æ›¿ä»£
    </script>
</body>
</html>
